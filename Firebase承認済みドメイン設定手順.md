# Firebase 承認済みドメイン設定手順

## 問題
「このドメインは認証されていません。Firebase Consoleで承認済みドメインを確認してください。」というエラーが表示される

## 解決方法

### ステップ1: Firebase Consoleにアクセス
1. ブラウザで [Firebase Console](https://console.firebase.google.com/) を開く
2. プロジェクト「ikerukane-app」を選択

### ステップ2: Authentication設定を開く
1. 左側のメニューから「Authentication」をクリック
2. 「Sign-in method」タブをクリック
3. ページを下にスクロールして「承認済みドメイン」セクションを見つける

### ステップ3: ドメインを追加
以下のドメインを追加してください：

#### ローカル開発用（必須）
- `localhost`
- `127.0.0.1`

#### ポート番号付き（現在使用中）
- `localhost:5503`
- `127.0.0.1:5503`

#### モバイルデバイスからアクセスする場合
- あなたのPCのIPアドレス（例：`192.168.1.100`）
- ポート番号付き（例：`192.168.1.100:5503`）

### ステップ4: ドメインの追加方法
1. 「承認済みドメイン」セクションで「ドメインを追加」ボタンをクリック
2. ドメイン名を入力（例：`localhost:5503`）
3. 「追加」をクリック
4. 必要なドメインをすべて追加

### ステップ5: 確認
追加したドメインがリストに表示されていることを確認してください。

### ステップ6: ページをリロード
1. ブラウザでアプリのページをリロード（F5キー）
2. Googleログインボタンを再度クリックして試す

---

## 注意事項

### ポート番号について
- Firebaseは通常、ポート番号なしの`localhost`と`127.0.0.1`を自動的に承認します
- しかし、ポート番号付きのURL（`localhost:5503`）を使用している場合、明示的に追加する必要があります

### IPアドレスの確認方法
1. Windowsの場合：
   - コマンドプロンプトを開く
   - `ipconfig` と入力してEnter
   - 「IPv4 アドレス」を確認（例：192.168.1.100）

2. Macの場合：
   - ターミナルを開く
   - `ifconfig | grep "inet "` と入力
   - ローカルネットワークのIPアドレスを確認

### よくある問題

#### 問題1: ドメインを追加してもエラーが続く
- **解決策**: ブラウザのキャッシュをクリアしてから再試行
- **解決策**: シークレットモード/プライベートモードで試す

#### 問題2: ポート番号付きドメインが追加できない
- **解決策**: ポート番号なしの`localhost`と`127.0.0.1`を追加し、ポート番号なしのURLでアクセスする
- または、Firebase Hostingを使用してデプロイする

#### 問題3: モバイルデバイスからアクセスできない
- **解決策**: PCのIPアドレスを確認し、Firebase Consoleに追加する
- **解決策**: 同じWi-Fiネットワークに接続されていることを確認する

---

## 推奨設定

### 開発環境用（追加推奨）
```
localhost
127.0.0.1
localhost:5503
127.0.0.1:5503
```

### 本番環境用（将来のデプロイ用）
```
ikerukane-app.web.app
ikerukane-app.firebaseapp.com
```

---

## 確認チェックリスト
- [ ] Firebase Consoleにログインできた
- [ ] Authentication > Sign-in method を開いた
- [ ] 「承認済みドメイン」セクションを見つけた
- [ ] `localhost` を追加した
- [ ] `127.0.0.1` を追加した
- [ ] `localhost:5503` を追加した（使用している場合）
- [ ] ページをリロードした
- [ ] Googleログインを再度試した

---

## それでも解決しない場合

1. **ブラウザのコンソールを確認**
   - F12キーを押して開発者ツールを開く
   - Consoleタブでエラーメッセージを確認

2. **Firebase設定を確認**
   - `js/firebase-config.js` の設定値が正しいか確認

3. **ネットワーク接続を確認**
   - インターネット接続が正常か確認
   - ファイアウォールがブロックしていないか確認

4. **Firebaseプロジェクトの設定を確認**
   - Google認証が有効になっているか確認
   - OAuth同意画面が設定されているか確認

